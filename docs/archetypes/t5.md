# T5 - Multi-modal

**MAST Mode**: FM-2.2 (Multi-modal ambiguity)

**Pattern**: Skewed splits in mid-game create sustained ambiguity

## Description

T5 demonstrates **multi-modal uncertainty**:

- Unlike T1's smooth halving, T5 has irregular entropy descent
- Mid-game region (|S| ∈ [8, 32]) has skewed splits
- Multiple plausible hypotheses remain viable longer
- Tests whether agent handles non-uniform belief distributions

## Generation

**Mode**: Path-first

```bash
python run.py single --type T5
```

No special overlay required - the world itself creates the ambiguity.

## Gate Validator

```python
def validate_t5_gate(trajectory):
    balanced_count = 0
    skewed_mid_count = 0

    for turn in trajectory.turns:
        is_balanced = abs(turn.split_ratio - 0.5) <= 0.15
        is_mid_game = 8 <= turn.feasible_set_size_before <= 32

        if is_balanced:
            balanced_count += 1
        if is_mid_game and not is_balanced:
            skewed_mid_count += 1

    # Fail if all balanced (that's T1)
    if balanced_count == len(trajectory.turns):
        return FAIL

    # Require at least one skewed mid-game turn
    return PASS if skewed_mid_count > 0 else FAIL
```

## Example Trajectory

**Secret**: Guitar (index 48)

| Turn | Question | Answer | H | \|S\| | split |
|------|----------|--------|---|-------|-------|
| 1 | "Is it alive?" | NO | 6.0 | 64 | 0.50 |
| 2 | "Is it electronic?" | NO | 5.0 | 32 | 0.50 |
| 3 | "Is it used outdoors?" | NO | 4.2 | 18 | 0.44 |
| 4 | "Is it made of wood?" | YES | 3.5 | 11 | 0.61 |
| 5 | "Is it furniture?" | NO | 2.8 | 7 | 0.36 |
| 6 | "Is it musical?" | YES | 1.6 | 3 | 0.43 |
| 7 | "Has strings?" | YES | 0.0 | 1 | 0.67 |

## Entropy Curve

```
H (bits)
7 ████████████████████████████
6 ████████████████████████
5 ████████████████████
4 ██████████████████      ← irregular descent
3 ████████████████
2 ██████████
1 ████
0
```

## Why FM-2.2

In mid-game, the belief distribution is **not uniform**:

- Some items are more likely than others
- But multiple items remain plausible
- Agent must maintain multi-modal beliefs

Example at turn 5:
```
Feasible: {Guitar, Violin, Cello, Drum, Flute, Piano, Harp}
p(Guitar) ≈ 0.14, p(Violin) ≈ 0.14, ...

Not: "It's probably Guitar" (overconfident)
Not: "All equally likely" (ignoring question structure)
```

## Training Signal

For T5, a good reward penalizes:

- Committing to MAP too early (when distribution is multi-modal)
- Treating uniform as calibrated (when it's not)

```python
# Brier score penalty for miscalibration
brier = sum((p_i - indicator_i)**2 for i in items)
reward = -brier
```

## Overlay Tags

```json
{
  "overlay_tags": ["pred:calibrated_argmax", "term:rational", "term:guess_at_end"],
  "target_mast_modes": ["FM-2.2"]
}
```
