# T7 - Late Shock

**MAST Mode**: FM-3.1 (Premature termination)

**Pattern**: Smooth descent then rare branch at the end

## Description

T7 creates a **confidence collapse**:

- Early/mid-game proceeds smoothly with balanced splits
- Agent builds confidence as entropy decreases
- Late-game rare branch causes unexpected large entropy drop
- Tests whether agent handles sudden uncertainty shifts

## Generation

**Mode**: Path-first

```bash
# For FM-3.1 (premature stop before shock)
python run.py single --type T7 --termination premature_stop
```

## Gate Validator

```python
def validate_t7_gate(trajectory):
    # Check last 2 turns for rare branch
    for turn in trajectory.turns[-2:]:
        if turn.branch_probability <= 0.25:
            return PASS
    return FAIL
```

## Example Trajectory

**Secret**: Canvas (index 21)

| Turn | Question | Answer | H | \|S\| | p_branch |
|------|----------|--------|---|-------|----------|
| 1 | "Used on flat surface?" | YES | 6.4 | 83 | 0.65 |
| 2 | "Used in classroom?" | YES | 5.8 | 54 | 0.65 |
| 3 | "Used as décor?" | YES | 5.1 | 35 | 0.65 |
| 4 | "Take when traveling?" | YES | 4.5 | 23 | 0.66 |
| 5 | "Is it reusable?" | YES | 3.9 | 15 | 0.65 |
| 6 | "Used professionally?" | YES | 3.3 | 10 | 0.67 |
| 7 | "For communication?" | YES | 2.8 | 7 | 0.70 |
| 8 | "Can you play with it?" | NO | 0.0 | 1 | **0.14** |

## Entropy Curve

```
H (bits)
7 ████████████████████████████
6 ████████████████████████
5 ████████████████████
4 ████████████████
3 ████████████
2 ████████
1 ████          ← smooth descent
0 ████████████  ← sudden drop (shock)
```

## Why FM-3.1

With `premature_stop` overlay:

**Turn 3** (H=5.1 bits):
```json
{
  "model_action": "stop",
  "stop_reason": "Premature stop at entropy 5.13 bits, |S|=35",
  "stop_accepted": false
}
```

The agent attempts to stop mid-game, thinking progress is going well. The environment rejects the stop, and the game continues.

## The "Shock" Moment

At turn 8:

- **Before**: H = 2.8 bits, |S| = 7
- **split_ratio** = 0.86 (86% would answer YES)
- **Answer**: NO (rare branch, p = 0.14)
- **After**: H = 0 bits, |S| = 1

The rare NO answer eliminates 6 of 7 remaining items in one turn.

## Training Signal

```python
# Penalize premature stop
if turn.model_action == "stop" and turn.entropy_after > 1.0:
    reward = -turn.entropy_after  # More entropy = worse

# Turn 3 stop attempt: reward = -5.1 (very bad)
```

## Overlay Tags

```json
{
  "overlay_tags": ["pred:calibrated_argmax", "term:premature_stop", "term:guess_at_end"],
  "target_mast_modes": ["FM-3.1"]
}
```
